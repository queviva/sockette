<!doctype html><html>
    
<head>
  <title>sockette</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style id="socketteStyle">
  
body {
    
    --col: 0;
    --lightness: 80%;
    --back-color: #444;
    
    --main-color: hsla(var(--col), 90%, var(--lightness), 1);
    --outline-color: hsla(var(--col), 80%, calc(0.3 * var(--lightness)), 1);
    
    background-color: var(--back-color);
    overflow: hidden;
}

#holder {
    margin: auto;
    width: 250px;
    xxxbackground-color: var(--main-color);
    xxxborder: 10px solid var(--outline-color);
}

svg {
    isolation: isolate;
    overflow: visible;
}
  
path {}

.outline {
    stroke: var(--outline-color);
    stroke-width: 3px;
    stroke-miterlimit: 30;
    vector-effect: non-scaling stroke;
    fill: none;
    
}
    
#sockHolder {
    transform: scale(25) translateY(-2px);
    stroke: none;
    stroke-width: 1px;
    fill: darkred;
    opacity: 2.0;
}

#sockieBody {
   --sock-trans-space-dn: scale(1,1);
   --sock-trans-space-up: scale(1,1);
   --sock-trans-keya-dn: scale(1,1);
   --sock-trans-keya-up: scale(1,1.3) translate(0, -1.4);
   --sock-trans-keya-shift-up: scale(1,1.5) translate(0, -1.6);
   transition-timing-function: ease-out;
}

#cheekline {
    
    fill: black;
    xxdisplay: none;
    
    --sock-space-dn: '\
    M 10.7 5 L 9.7 1.6 L 10.5 5.2 Z \
    M 10.861 6.525 \
    C 10.376 5.859 10.504 5.071 11.227 4.782 \
    C 10.547 4.851 9.796 5.804 10.861 6.525 \
    Z \
    ';
    
    --sock-space-up: '\
    M 10.7 5 L 9.7 1.6 L 10.5 5.2 Z \
    M 10.861 6.525 \
    C 10.376 5.859 10.504 5.171 11.1 4.682 \
    C 10.547 4.851 9.796 5.804 10.861 6.525 \
    Z \
    ';
    
    --sock-space-shift-up: '\
    M 10.7 5 L 9.7 1.6 L 10.5 5.2 Z \
    M 10.861 6.525 \
    C 10.376 5.859 10.504 5.171 11.027 4.582 \
    C 10.547 4.851 9.796 5.804 10.861 6.525 \
    Z \
    ';
    
    --sock-keya-dn: var(--sock-space-dn);
    --sock-keya-up: var(--sock-space-up);
    
    --old-anger-mx: 'M 5 6.5 Q 4.5 6.6 3.9 7.5 Q 5 9.5 5.7 14 Q 4.5 8.5 3.4 7.5 Q 4 6.7 5 6.5 Z';
    
    --old-sock-dn: 'M 5.5 7.7 Q 4.8 7.9 4.3 8.6 Q 5.2 10 5.7 12.2 Q 5 10 3.9 8.5 Q 4.5 7.7 5.5 7.7 Z';
    
    --old-sock-up: 'M 5 6.5 Q 4.5 6.6 3.9 7.5 Q 5 9.5 5.7 13 Q 4.5 8.5 3.4 7.5 Q 4 6.7 5 6.5 Z';
}

#mouth {
    
    fill: black;
    
    --sock-space-dn: 'M 5.7 9.4 Q 9.5 9.8 12 9.4 Q 11 9.6 10.4 9.8 Q 11 10.1 12 10.1 Q 9 10 6 10.4 Q 5.7 9.9 5.7 9.9  Q 5.7 9.4 5.7 9.4 Z M 5.1 9.4 Q 5.8 9.55 6.1 9 L 5.8 9.6 Z';
    
    --sock-space-up: '\
    M 5.6 9 \
    Q 9 9.8 12 9 \
    Q 10.9 9.4 10.6 9.8 Q 11 10.1 11.4 10.2 \
    Q 9 10 6 10.45 \
    Q 5.6 9.75 5.6 9.75 Q 5.6 9 5.6 9 \
    Z \
    M 5 9.1 Q 5.7 9.2 6 8.5  L 5.7 9.2  Z';
    
    --sock-space-shift-dn: 'M 5.7 9.4 Q 8.8 10 12 9.4 Q 11 9.65 10.6 9.8 Q 11 10.0 12 10.1 Q 8.0 9.9 6 10.4 Q 5.8 9.9 5.8 9.9 Q 5.7 9.4 5.7 9.4 Z\
    M 5.1 9.4 Q 5.8 9.55 6.1 9 L 5.8 9.6 Z';
    
    --sock-space-shift-up: '\
    M 5.5 8.8 \
    Q 9 9.6 11.9 8.8 \
    Q 10.8 9.4 10.6 9.9 Q 11 10.2 11.4 10.3 \
    Q 9 10.1 6 10.55 \
    Q 5.6 9.8 5.6 9.8 Q 5.5 8.8 5.5 8.8 \
    Z \
    M 5 8.9 Q 5.7 8.9 6 8.4  L 5.7 9  Z';
    
    --sock-keya-dn: 'M 5.5 9 Q 9 10 12 9 Q 11 9.4 10.4 9.8 Q 12 10 12 10 Q 8 9.8 6.1 10.7 Q 5.4  9.7 5.4 9.7 Q 5.5 9 5.5 9 Z M 5.1 9.15 Q 5.5 9 6 8.6 L 5.6 9.1 Z';
    
    --sock-keya-up: 'M 5.5 8 Q 9 10 12 8 Q 10.5 9 10 10 Q 11 10.3 12 10.5 Q 9 10 6 11.2 Q 5.2 9.5 5.2 9.5 Q 5.5 8 5.5 8 Z M 4.95 8.15 Q 5.3 8.1 5.9 7.8 L 5.55 8.25 Z';
    
    --sock-keya-shift-dn: 'M 5.5 9 Q 9 10 12 9 Q 11 9.4 10.4 9.5 Q 12 9.5 12 9.5 Q 8 9.8 6.1 9.7 Q 5.4  9.7 5.4 9.7 Q 5.5 9 5.5 9 Z M 4.8 9.15 Q 5.5 9 6 8.6 L 5.6 9.1 Z';
    
    --sock-keya-shift-up: 'M 5.5 8 Q 9 10 12 8 Q 10.5 9 10 10 Q 11 12.3 12 12.5 Q 9 12 6 13.2 Q 5.2 9.5 5.2 9.5 Q 5.5 8 5.5 8 Z M 4.95 8.15 Q 5.3 8.1 5.9 7.8 L 5.55 8.25 Z';
    
    --sock-keyd-dn: var(--sock-keya-dn);
    --sock-keyd-up: var(--sock-keya-up);
    
}

#shade {
    --sock-space-up:'M 15.391 7.354 C 13.399 7.272 12.133 7.52 11.592 8.098 L 12.624 13.554 C 13.113 14.004 16.92 15.18 17.243 14.357 L 17.449 15.828 L 9.093 15.769 L 3.326 16.387 L 2.737 14.886 L 2.355 12.503 L 3.326 10.384 C 3.521 12.578 4.247 13.755 5.503 13.915 C 5.523 13.454 5.778 13.17 6.268 13.062 L 4.65 10.237 L 3.414 7.148 L 4.583 6.211 C 5.824 7.459 6.998 9.799 8.652 12.326 C 8.965 11.311 9.535 10.302 10.358 9.296 L 9.829 6.824 L 8.887 3.028 L 8.652 0.939 L 9.61 0.463 \
    C 10.181 1.396 11.031 2.872 11.321 4.6 \
    C 10.6 5.156 10.634 7.046 12.253 6.737 \
    C 14.572 6.937 15.219 6.926 15.978 6.824 \
    L 15.391 7.354 Z';
    
    --sock-space-dn:'M 15.391 7.354 C 13.399 7.272 12.133 7.52 11.592 8.098 L 12.624 13.554 C 13.113 14.004 16.92 15.18 17.243 14.357 L 17.449 15.828 L 9.093 15.769 L 3.326 16.387 L 2.737 14.886 L 2.355 12.503 L 3.326 10.384 C 3.521 12.578 4.247 13.755 5.503 13.915 C 5.523 13.454 5.778 13.17 6.268 13.062 L 4.65 10.237 L 3.414 7.148 L 4.583 6.211 C 5.824 7.459 6.998 9.799 8.652 12.326 C 8.965 11.311 9.535 10.302 10.358 9.296 L 9.829 6.824 L 8.887 3.028 L 8.652 0.939 L 9.61 0.463 \
    C 10.181 1.396 11.031 2.872 11.421 4.743 \
    C 10.772 5.156 10.634 7.046 12.253 6.737 \
    C 14.572 6.937 15.219 6.926 15.978 6.824 \
    L 15.391 7.354 Z ';
    
    --sock-space-shift-up:'M 15.391 7.354 C 13.399 7.272 12.133 7.52 11.592 8.098 L 12.624 13.554 C 13.113 14.004 16.92 15.18 17.243 14.357 L 17.449 15.828 L 9.093 15.769 L 3.326 16.387 L 2.737 14.886 L 2.355 12.503 L 3.326 10.384 C 3.521 12.578 4.247 13.755 5.503 13.915 C 5.523 13.454 5.778 13.17 6.268 13.062 L 4.65 10.237 L 3.414 7.148 L 4.583 6.211 C 5.824 7.459 6.998 9.799 8.652 12.326 C 8.965 11.311 9.535 10.302 10.358 9.296 L 9.829 6.824 L 8.887 3.028 L 8.652 0.939 L 9.61 0.463 \
    C 10.181 1.396 11.031 2.872 11.321 4.5 \
    C 10.6 5.156 10.634 7.046 12.253 6.737 \
    C 14.572 6.937 15.219 6.926 15.978 6.824 \
    L 15.391 7.354 Z';
    
    --sock-space-shift-dn:'M 15.391 7.354 C 13.399 7.272 12.133 7.52 11.592 8.098 L 12.624 13.554 C 13.113 14.004 16.92 15.18 17.243 14.357 L 17.449 15.828 L 9.093 15.769 L 3.326 16.387 L 2.737 14.886 L 2.355 12.503 L 3.326 10.384 C 3.521 12.578 4.247 13.755 5.503 13.915 C 5.523 13.454 5.778 13.17 6.268 13.062 L 4.65 10.237 L 3.414 7.148 L 4.583 6.211 C 5.824 7.459 6.998 9.799 8.652 12.326 C 8.965 11.311 9.535 10.302 10.358 9.296 L 9.829 6.824 L 8.887 3.028 L 8.652 0.939 L 9.61 0.463 \
    C 10.181 1.396 11.031 2.872 11.421 4.743 \
    C 10.9 5.156 10.634 7.046 12.253 6.737 \
    C 14.572 6.937 15.219 6.926 15.978 6.824 \
    L 15.391 7.354 Z ';
    
}
  </style>
</head>

<body>
<div id="holder">
    
<svg viewBox="0 0 430 400" width="390pt" height="400pt">
<g id="sockHolder" vector-effect="non-scaling-stroke">
 
 <g id="sockieBody" data-sock="trans-Space trans-KeyA anima-KeyW">
  <g transform="
    scale(0.8)
    translate(-5,2)
  ">
    <g>

    <path d=" M 9.572 6.973 C 9.29 5.604 8.567 3.692 8.448 1.13 C 8.689 0.729 9.168 0.146 9.635 0 C 10.293 0.526 13.529 1.283 14.494 1.286 C 15.093 2.783 15.71 4.413 16.518 4.802 C 17.099 5.13 16.784 7.134 15.715 7.012 C 16.539 9.345 17.308 12.595 17.758 15.651 C 13.7 15.476 4.556 16.164 3.196 16.473 C 0.911 11.293 3.121 9.075 4.338 10.165 C 3.858 8.974 3.528 8.206 3.326 7.162 C 3.387 6.76 3.999 5.707 4.338 5.547 C 4.96 5.316 8.367 5.554 9.093 6.018 Q 9.421 6.574 9.572 6.973 Z " fill="rgb(0,0,0)"/>
    
    <path d=" M 8.856 1.484 C 8.973 1.1 9.265 0.716 9.675 0.566 C 10.653 1.278 13.31 1.607 14.018 1.764 C 14.171 2.301 15.265 4.669 16.072 5.002 C 16.641 5.373 16.254 6.79 15.391 6.814 C 15.111 6.933 14.198 6.676 11.241 6.737 C 12.579 6.842 14 7.058 15.338 7.162 C 15.767 8.462 17.069 14.215 17.11 15.651 C 14.547 15.548 10.128 15.492 9.269 15.57 C 8.841 13.807 6.173 10.696 4.956 7.557 C 5.586 10.493 8.636 14.004 8.856 15.769 C 8.196 15.792 4.335 16.305 3.617 16.387 C 2.011 14.711 2.768 8.01 5.44 11.743 L 7.061 14.623 C 5.52 10.997 4.194 9.018 3.852 7.204 C 3.957 6.873 4.235 6.542 4.583 6.211 C 5.249 5.798 8.219 6.284 8.801 6.748 C 9.195 7.367 10.143 9.356 10.477 9.733 C 10.667 10.295 11.365 12.204 11.634 14.828 C 11.982 12.532 8.826 4.178 8.856 1.484 L 8.856 1.484 Z " fill="rgb(232,232,232)"/>
    
    <path id="shade" data-sock fill="rgb(200,0,0)" fill-opacity="0.25"/>
    
    <path d=" M 9.982 6.955 C 10.101 6.645 10.348 6.395 10.718 6.317 C 10.825 6.528 11.082 6.703 11.306 6.703 C 12.12 6.749 14.798 7.011 15.379 7.16 L 15.615 8.147 C 15.366 8.151 12.392 7.909 11.557 7.957 C 11.101 7.975 10.705 7.973 10.403 8.417 L 9.982 6.973 L 9.982 6.955 Z " fill="rgb(210,146,50)"/>
    
    <path d=" M 9.965 7.15 C 9.955 6.895 10.365 6.508 10.784 6.463 C 10.719 6.416 10.668 6.328 10.603 6.281 C 10.184 6.275 9.839 6.647 9.906 6.868 C 9.953 6.966 9.918 7.052 9.965 7.15 L 9.965 7.15 Z " fill="rgb(0,0,0)"/>
    
    <path d=" M 0 16.931 C 10.871 14.639 16.476 15.304 20 16.073 C 15.029 15.741 9.946 15.61 0 16.931 Z " fill="rgb(0,0,0)"/>
    
    <path d=" M 3.5 16.259 C 3.379 16.137 3.44 16.106 3.319 15.984 C 3.179 14.574 4.324 12.699 5.195 12.644 C 4.032 13.215 3.273 14.979 3.5 16.259 Z " fill="rgb(127,127,127)"/>
    
    <path d=" M 10.274 8.675 C 10.29 8.28 10.761 7.877 11.209 7.861 C 12.472 7.855 14.826 8.037 15.606 8.098 C 15.696 8.244 15.623 8.236 15.713 8.382 C 15.011 8.31 12.152 8.003 11.259 8.125 C 10.821 8.154 10.404 8.523 10.327 8.982 L 10.274 8.675 L 10.274 8.675 Z " fill="rgb(0,0,0)"/>
    
    <path d=" M 10.646 9.383 C 10.706 9.088 11.022 8.784 11.301 8.686 C 11.903 8.639 15.252 8.755 15.825 8.922 L 16.244 10.672 C 15.287 10.49 12.955 10.507 12.132 10.556 C 11.541 10.512 11.251 10.85 11.049 11.26 C 10.919 10.627 10.801 10 10.646 9.383 L 10.646 9.383 Z " fill="rgb(157,14,14)"/>
    
    <path d=" M 10.582 9.394 C 10.598 8.986 11.055 8.571 11.49 8.555 C 12.717 8.548 15.061 8.78 15.819 8.842 C 15.906 8.992 15.85 8.999 15.938 9.149 C 15.255 9.075 12.407 8.702 11.539 8.827 C 11.114 8.857 10.709 9.237 10.634 9.71 L 10.582 9.394 L 10.582 9.394 Z " fill="rgb(0,0,0)"/>
    
    <path d=" M 11.036 11.175 C 11.062 10.769 11.585 10.314 12.013 10.309 C 13.219 10.334 15.537 10.566 16.28 10.648 L 16.359 11.001 C 15.69 10.91 12.91 10.536 12.054 10.64 C 11.635 10.659 11.228 11.028 11.142 11.499 L 11.036 11.175 L 11.036 11.175 Z " fill="rgb(0,0,0)"/>
    
    <path d=" M 9.207 4.043 C 9.292 3.821 9.861 3.53 10.172 3.544 L 10.646 5.149 C 10.434 5.336 10.403 5.512 10.339 5.725 C 10.13 5.722 9.974 5.856 9.721 6.018 L 9.207 4.043 L 9.207 4.043 Z " fill="rgb(157,14,14)"/>
    
    <path d=" M 9.269 4.18 C 9.351 3.85 9.666 3.616 10.23 3.548 L 10.132 3.362 C 9.44 3.38 9.192 3.624 9.063 3.892 C 9.301 4.227 9.193 4.077 9.269 4.18 L 9.269 4.18 Z " fill="rgb(0,0,0)"/>
    
    <path d=" M 9.683 6.586 C 9.751 6.272 9.94 5.831 10.403 5.833 C 10.343 5.781 10.42 5.676 10.36 5.624 C 9.877 5.551 9.545 6.061 9.57 6.276 C 9.685 6.584 9.645 6.492 9.683 6.586 L 9.683 6.586 Z " fill="rgb(0,0,0)"/>
    </g>
    
    <path id="cheekline" data-sock="Space KeyA"/>
    
    <g>
    <path d=" M 5.261 8.522 C 5.065 8.457 4.754 8.269 4.392 7.957 C 4.724 8.34 5.074 8.631 5.44 8.827 L 5.261 8.522 Z " fill="rgb(0,0,0)"/>
    
    <path d=" M 9.93 2.472 C 9.787 2.39 9.522 2.183 9.287 1.86 C 9.489 2.243 9.738 2.545 9.994 2.766 L 9.93 2.472 Z " fill="rgb(00,0,0)"/>
    
    <path d=" M 11.531 13.622 C 11.254 13.456 11.14 13.806 11.234 14.732 C 11.294 14.061 11.375 13.639 11.534 13.916 L 11.531 13.622 Z " fill="rgb(0,0,0)"/>
    
    <path d=" M 11.321 13.801 C 10.363 13.751 9.773 14.318 9.612 15.116 C 10.045 14.311 10.567 13.862 11.276 14.003 L 11.321 13.801 Z " fill="rgb(0,0,0)"/>
    
    <path d=" M 5.883 7.855 L 9.999 14.313 L 9.971 14.437 L 5.883 7.855 L 5.883 7.855 Z " fill="rgb(0,0,0)"/>
    </g>
  
  </g>
 </g>
 
  <g id="ombre"
   transform="
    scale(0.56, 0.5)
    translate(4.7,2)
    rotate(5)
   "
  >
    <path id="mouth" data-sock="Space KeyA KeyD"/>
    
  </g>
  
</g>
</svg>

</div>
</body>

<script data-sockette='{ "selector": "sock" }'>
//////////////////////////////////////////////////////{
// queviva - sock puppetry for svg - dec 5781
//
// + allow transform animations
//
// DEBUGG {
//  'use strict';
//  'use strong';
//  localStorage.clear();
// }
//////////////////////////////////////////////////////}

new (function() {
    
//////////////////////////////////////////////////////
// prefs & vars {
    
    // default prefs for all Sockette objects {
    const defPrefs = {
        selector: 'sockette',
        speed : { min: '50ms', max: '250ms' },
        updn : 'dn',
        curPath : ['Space']
    };
    //}
    
    // try to get options set in script's data-params {
    const opts = JSON.parse(((document.querySelector(`
        script[src*="${ defPrefs.selector }"][src$=".js"],
        script[data-${ defPrefs.selector }]
    `) || {}).dataset || {})[defPrefs.selector] || '{}');
    //}
    
    // clean up options {
    for (let p in opts) {
        
        if (defPrefs[p] === undefined) delete opts[p];
        
    }
    //}
    
    // over-rite default prefs with script's data-param {
    for (let p in defPrefs) {
        
        opts[p] = opts[p] !== undefined ? opts[p] : defPrefs[p];

    }
    //}
    
    // types of paths {
    const allPaths = {
        Space: [],
        'Space-shift' : [],
        ShiftRight: [],
        ShiftLeft: [],
        KeyF: [],
        'KeyF-shift': []
    };
    const allTrans =  { Space: [], 'Space-shift': [] };
    const allAnima = {};
    
    // "e.repeat" will fail for shiftKey
    for (let p in allPaths) { allPaths[p].pressed = false; }
    //}
    
//}
    
//////////////////////////////////////////////////////
// sockette object {
    const Sockette = function(obj) {
    
        // public vars {
        this.obj = obj;
        this.objS = window.getComputedStyle(obj);
        this.coords = {};
        this.trans = {};
        //}
        
        // set transition and duration {
        obj.style.transition = 'd ease-out, transform ease-out';
        obj.style.transitionDuration = opts.speed.min;
        //}
       
        // get any key-list {
        let keyList = (
            
            ((obj.dataset || '')[opts.selector] || 'Space').trim().split(/\s+/g)
        
        );
        //}
        
        // make coords for each key{
        for (let k in keyList) {
            
            if (keyList[k].match(/trans/)) {
                            
                // shorthand for the key
                let key = keyList[k].replace(/trans-/,'');
                let fix = '--sock-trans-' + key.toLowerCase() + '-';
            
                // create key entry in the paths if needed
                if (allTrans[key] === undefined) {
                    allTrans[key] = [];
                    allTrans[key + '-shift'] = [];
                }
            
                // add the id to the list for this key
                allTrans[key].push(obj.id);
                allTrans[key + '-shift'].push(obj.id);
            
                // array of coords for this obj for this key
                this.trans[key] = {};
                this.trans[key + '-shift-'] = {};
            
                // get up and down coords for each key
                ['up', 'dn'].forEach(updn => {
            
                    let tmpTrans = '';
            
                    this.trans[key][updn] = (tmpTrans =
                        this.objS.getPropertyValue(
                            fix + updn
                        ).replace(/\"/g, '').trim() || 'scale(1)'
                    );
            
                    // check if a shift exists
                    this.trans[key + '-shift-'][updn] =
                        this.objS.getPropertyValue(
                            fix + 'shift-' + updn
                        ).replace(/\"/g, '').trim() || tmpTrans;
            
                });
                
            } else if (keyList[k].match(/anima/)) {
                //console.log(obj.id,'k',keyList[k].replace(/anima-/,''),'anima!');
            } else {
            
                // shorthand for the key
                let key = keyList[k];
                let fix = '--sock-' + key.toLowerCase() + '-';
            
                // create key entry in the paths if needed
                if (allPaths[key] === undefined) {
                    allPaths[key] = [];
                    allPaths[key + '-shift'] = [];
                }
            
                // add the id to the list for this key
                allPaths[key].push(obj.id);
                allPaths[key + '-shift'].push(obj.id);
            
                // array of coords for this obj for this key
                this.coords[key] = {};
                this.coords[key + '-shift-'] = {};
            
                // get up and down coords for each key
                ['up', 'dn'].forEach(updn => {
            
                    let tmpCoords = '';
            
                    this.coords[key][updn] = (tmpCoords =
                        this.objS.getPropertyValue(
                            fix + updn
                        ).replace(/\"/g, '').trim() || 'M0 0Z'
                    );
            
                    // check if a shift exists
                    this.coords[key + '-shift-'][updn] =
                        this.objS.getPropertyValue(
                            fix + 'shift-' + updn
                        ).replace(/\"/g, '').trim() || tmpCoords;
            
                });
            }
                    
        }
        //}
        
    };
//}

//////////////////////////////////////////////////////
// methods {
        
    // how to draw the paths {
    const drawPaths = e => {
        
        let key = opts.curPath[opts.curPath.length - 1];
    
        allPaths[key].forEach(p => {
    
            this[p].obj.setAttribute('d',
                this[p].coords[
                    key + (e.shiftKey ? '-shift-' : '')
                ][opts.updn]
            );
    
        });
    
        for (let i in this) {
            this[i].obj.setAttribute('transform', 'scale(1)');
        }
        (allTrans[key]||[]).forEach(t => {
            this[t].obj.setAttribute('transform',
                    this[t].trans[
                        key + (e.shiftKey ? '-shift-' : '')
                    ][opts.updn]
            );
            
        });
    
    };
    //}
    
    // method to reset {
    const reset = e => {
        for (let p in allPaths) {
            allPaths[p].pressed = false;
        }
        opts.curPath = ['Space'];
        opts.updn = 'dn';
        drawPaths({ shiftKey: false });
    };
    //}
    
//}

//////////////////////////////////////////////////////
// lizzers {
        
    // listen for key pressing {
    document.addEventListener('keydown', e => {
        
        // ignore if key not used or already pressed
        if (!allPaths.hasOwnProperty(e.code) ||
             allPaths[e.code].pressed === true) { return; }
             //e.repeat === true) { return; } // !!!fails for shift!!!
        
        // this key is pressed
        allPaths[e.code].pressed = true;
        
        // toggle up|dn on space bar
        if (e.code === 'Space') {
            
            opts.updn = 'up';
            
        }
        
        // max speed on f key
        else if (e.code === 'KeyF') {
            
            // loop through all sockettes and change duration
            for (let i in this) {
                this[i].obj.style.transitionDuration = opts.speed.max;
            }
            
            return; // no redraw
            
        }
        
        // for all non-shift keys
        else if(!e.code.match(/shift/i)) {
            
            // append to the current path list
            opts.curPath.push(e.code);
            
        }
        
        // redraw the paths
        drawPaths(e);
        
    });
    //}
    
    // listen for key upping {
    document.addEventListener('keyup', e => {
        
        
        // ignore if not used
        if (!allPaths.hasOwnProperty(e.code)) {
            return;
        }
        
        // this key no longer pressed
        allPaths[e.code].pressed = false;
        
        // swap up|dn on space bar
        if (e.code === 'Space') {
            opts.updn = 'dn';
        }
        
        // min speed on f key
        else if (e.code === 'KeyF') {
            
            // loop over all socketts and minimize duration
            for (let i in this) {
                this[i].obj.style.transitionDuration = opts.speed.min;
            }
            
            return; // no redraw
            
        }
        
        // otherwise return to normal
        else {
            // remove this key from the curPath list
            opts.curPath.forEach((path, i) => {
                if (path === e.code) {
                    opts.curPath.splice(i, 1);
                }
            });
        }
        
        // draw, pardner
        drawPaths(e);
            
    });
    //}

    // oy vey - listen for complete loss of focus
    window.addEventListener('blur', reset);
    
//}
    
//////////////////////////////////////////////////////
// init on win.load {
    window.addEventListener('load', e => {
    
        // loop through all data-param-specified objects
        document.querySelectorAll(
    
            // that are NOT a script tag
            `[data-${opts.selector}]:not(script)`
    
        ).forEach(obj => {
    
            // make each one an object
            this[obj.id] = new Sockette(obj);
    
        });
    
        // draw on load
        drawPaths({ shiftKey: false });
    
        const rat ='master';
    });
//}
    
})();


// path optimizer {
let optimizeSVG = () => {
        let newCode = '';
    
        // loop through all paths
        document.querySelectorAll('#bodyline').forEach(path => {
    
            let d = window.getComputedStyle(path).getPropertyValue('--norm-dn').replace(/\"/,'').trim().split(/\s+/);
            
            console.log('got', d);
    
            d = d.map(val =>
                (!isNaN(parseInt(val, 10))) ?
                    Math.round(
                    parseFloat(val, 10) *10
                    ) / 10
                    :
                val
            );
    
            newCode += (
                '<path d="' +
                d
                .join(' ')
                .replace(/\"/g, '')
                .replace(/([a-z]) (\d)/gi, '$1$2')
                .replace(/(\d) ([a-z])/gi, '$1$2') +
                '"/>\n\n'
            );
            
            path.setAttribute('d',
                d
                .join(' ')
                .replace(/\"/g, '')
                //.replace(/([a-z]) (\d)/gi, '$1$2')
                //.replace(/(\d) ([a-z])/gi, '$1$2')
            );
            
            path.setAttribute('fill', 'black');
    
    
        });
    
        console.log(newCode);
    };
//optimizeSVG();
//}

</script>

</html>